{
  "hash": "431b092be5f3e689865dc12921f9f46b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Counts\"\nauthor: \"Hardik Monga\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mosaic)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 method overwritten by 'mosaic':\n  method                           from   \n  fortify.SpatialPolygonsDataFrame ggplot2\n\nThe 'mosaic' package masks several functions from core packages in order to add \nadditional features.  The original behavior of these functions should not be affected by this.\n\nAttaching package: 'mosaic'\n\nThe following object is masked from 'package:Matrix':\n\n    mean\n\nThe following objects are masked from 'package:dplyr':\n\n    count, do, tally\n\nThe following object is masked from 'package:purrr':\n\n    cross\n\nThe following object is masked from 'package:ggplot2':\n\n    stat\n\nThe following objects are masked from 'package:stats':\n\n    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,\n    quantile, sd, t.test, var\n\nThe following objects are masked from 'package:base':\n\n    max, mean, min, prod, range, sample, sum\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggformula)\nlibrary(skimr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'skimr'\n\nThe following object is masked from 'package:mosaic':\n\n    n_missing\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(knitr)\nlibrary(kableExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'kableExtra'\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi <- read.csv(\"https://vincentarelbundock.github.io/Rdatasets/csv/modeldata/taxi.csv\")\n```\n:::\n\n\n\n### Skim\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi %>% skimr::skim()\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |10000      |\n|Number of columns        |8          |\n|_______________________  |           |\n|Column type frequency:   |           |\n|character                |5          |\n|numeric                  |3          |\n|________________________ |           |\n|Group variables          |None       |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|tip           |         0|             1|   2|   3|     0|        2|          0|\n|company       |         0|             1|   5|  28|     0|        7|          0|\n|local         |         0|             1|   2|   3|     0|        2|          0|\n|dow           |         0|             1|   3|   3|     0|        7|          0|\n|month         |         0|             1|   3|   3|     0|        4|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|    mean|      sd| p0|     p25|     p50|     p75|    p100|hist  |\n|:-------------|---------:|-------------:|-------:|-------:|--:|-------:|-------:|-------:|-------:|:-----|\n|rownames      |         0|             1| 5000.50| 2886.90|  1| 2500.75| 5000.50| 7500.25| 10000.0|▇▇▇▇▇ |\n|distance      |         0|             1|    6.22|    7.38|  0|    0.94|    1.78|   15.56|    42.3|▇▁▂▁▁ |\n|hour          |         0|             1|   14.18|    4.36|  0|   11.00|   15.00|   18.00|    23.0|▁▃▅▇▃ |\n\n\n:::\n:::\n\n\n\n### Glimpse\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(taxi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 10,000\nColumns: 8\n$ rownames <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ tip      <chr> \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\"…\n$ distance <dbl> 17.19, 0.88, 18.11, 20.70, 12.23, 0.94, 17.47, 17.67, 1.85, 1…\n$ company  <chr> \"Chicago Independents\", \"City Service\", \"other\", \"Chicago Ind…\n$ local    <chr> \"no\", \"yes\", \"no\", \"no\", \"no\", \"yes\", \"no\", \"no\", \"no\", \"no\",…\n$ dow      <chr> \"Thu\", \"Thu\", \"Mon\", \"Mon\", \"Sun\", \"Sat\", \"Fri\", \"Sun\", \"Fri\"…\n$ month    <chr> \"Feb\", \"Mar\", \"Feb\", \"Apr\", \"Mar\", \"Apr\", \"Mar\", \"Jan\", \"Apr\"…\n$ hour     <int> 16, 8, 18, 8, 21, 23, 12, 6, 12, 14, 18, 11, 12, 19, 17, 13, …\n```\n\n\n:::\n:::\n\n\n\n### Inspect\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninspect(taxi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n     name     class levels     n missing\n1     tip character      2 10000       0\n2 company character      7 10000       0\n3   local character      2 10000       0\n4     dow character      7 10000       0\n5   month character      4 10000       0\n                                   distribution\n1 yes (92.1%), no (7.9%)                       \n2 other (27.1%) ...                            \n3 no (81.2%), yes (18.8%)                      \n4 Thu (19.6%), Wed (17.5%), Tue (16.3%) ...    \n5 Apr (31.8%), Mar (31.4%), Feb (20.4%) ...    \n\nquantitative variables:  \n      name   class min      Q1  median        Q3     max        mean\n1 rownames integer   1 2500.75 5000.50 7500.2500 10000.0 5000.500000\n2 distance numeric   0    0.94    1.78   15.5625    42.3    6.224144\n3     hour integer   0   11.00   15.00   18.0000    23.0   14.177300\n           sd     n missing\n1 2886.895680 10000       0\n2    7.381397 10000       0\n3    4.359904 10000       0\n```\n\n\n:::\n:::\n\n\n\n### Modified Taxi Glimpse\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Convert `dow`, `local`, and `month` into ordered factors\ntaxi_modified <- taxi %>%\n  mutate(\n    dow = factor(dow,\n      levels = c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"),\n      labels = c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"),\n      ordered = TRUE\n    ),\n    ##\n    local = factor(local,\n      levels = c(\"no\", \"yes\"),\n      labels = c(\"no\", \"yes\"),\n      ordered = TRUE\n    ),\n    ##\n    month = factor(month,\n      levels = c(\"Jan\", \"Feb\", \"Mar\", \"Apr\"),\n      labels = c(\"Jan\", \"Feb\", \"Mar\", \"Apr\"),\n      ordered = TRUE\n    )\n  )\ntaxi_modified %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 10,000\nColumns: 8\n$ rownames <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ tip      <chr> \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\"…\n$ distance <dbl> 17.19, 0.88, 18.11, 20.70, 12.23, 0.94, 17.47, 17.67, 1.85, 1…\n$ company  <chr> \"Chicago Independents\", \"City Service\", \"other\", \"Chicago Ind…\n$ local    <ord> no, yes, no, no, no, yes, no, no, no, no, no, no, no, yes, no…\n$ dow      <ord> Thu, Thu, Mon, Mon, Sun, Sat, Fri, Sun, Fri, Tue, Tue, Sun, W…\n$ month    <ord> Feb, Mar, Feb, Apr, Mar, Apr, Mar, Jan, Apr, Mar, Mar, Apr, A…\n$ hour     <int> 16, 8, 18, 8, 21, 23, 12, 6, 12, 14, 18, 11, 12, 19, 17, 13, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngf_bar(~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Stack: Counts of Tips\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_bar(~ tip, color = ~local, data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Stack: Counts of Tips and Local\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-2.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_bar(~ tip, fill = ~local, position = \"stack\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Stack: Counts of Tips and Local\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-3.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_bar(~ tip, fill = ~local, position = \"dodge\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Dodge: Counts of Tips and Local\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-4.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_props(~ tip, fill = ~local, position = \"fill\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Fill: Ratio of Tips and Local\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-5.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_props(~ company, fill = ~tip, position = \"fill\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot A Fill: Ratio of Tips for Different Companies\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-6.png){width=672}\n:::\n\n```{.r .cell-code}\n#| label: Alternate Syntax\nggplot(taxi_modified)  + \n  geom_bar(aes(x = tip)) + \n  labs(title = \"Plot 1A: Counts of Tips\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-7.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngf_bar(~ hour, fill = ~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot B: Counts of Tips by Hour\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_props(~ hour, fill = ~ tip, position = \"fill\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot B: Counts of Tips by Hour\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n\n```{.r .cell-code}\n##\ngf_bar(~ dow, fill = ~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot C: Counts of Tips by Day of Week\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-3.png){width=672}\n:::\n\n```{.r .cell-code}\n##\ngf_bar(~ month, fill = ~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot D: Counts of Tips by Month\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-4.png){width=672}\n:::\n\n```{.r .cell-code}\n##\ngf_bar(~ month | dow, fill = ~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot E: Counts of Tips by Day of Week and Month\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-5.png){width=672}\n:::\n\n```{.r .cell-code}\n##\n## This may be too busy a graph...\ngf_bar(~ dow | hour, fill = ~ tip, data = taxi_modified) %>%\n  gf_labs(title = \"Plot F: Counts of Tips by Hour and Day of Week\",\n          subtitle = \"Is this plot arrangement easy to grasp?\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-6.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_props(~ dow | hour, fill = ~ tip, position = \"fill\", data = taxi_modified) %>%\n  gf_labs(title = \"Plot F: Counts of Tips by Hour and Day of Week\",\n          subtitle = \"Is this plot arrangement easy to grasp?\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-7.png){width=672}\n:::\n\n```{.r .cell-code}\n## This is better!\ngf_bar(~ hour | dow, fill = ~ tip, data = taxi) %>%\n  gf_labs(title = \"Plot G: Counts of Tips by Hour and Day of Week\",\n          subtitle = \"Swapped the Facets\")  \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-8.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_props(~ hour | dow, fill = ~ tip, position = 'fill', data = taxi) %>%\n  gf_labs(title = \"Plot G: Counts of Tips by Hour and Day of Week\",\n          subtitle = \"Swapped the Facets\")  \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-9.png){width=672}\n:::\n:::\n\n\n\n# Your Turn\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstar_trek <- read_delim(file = \"../../data/star_trek_books.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 783 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr  (7): title, author, publisher, identifier, series, subseries, dedication\ndbl  (3): nchap, nword, nchar\ndate (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstar_trek\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 783 × 11\n   title    author date       publisher identifier series subseries nchap  nword\n   <chr>    <chr>  <date>     <chr>     <chr>      <chr>  <chr>     <dbl>  <dbl>\n 1 Star Tr… Alan … 2009-05-12 Simon an… 1439163391 AV     <NA>         18  77035\n 2 Starfle… Rick … 2010-11-02 Simon Sp… 978144241… AV     Starflee…    14  40129\n 3 Starfle… Rudy … 2010-12-28 Simon Sp… 978144241… AV     Starflee…    31  52547\n 4 Starfle… Rick … 2011-06-28 Simon Sp… 978144241… AV     Starflee…    13  39495\n 5 Starfle… Alan … 2012-06-26 Simon Sp… 978144242… AV     Starflee…    30  62030\n 6 Star Tr… Alan … 2013-05-21 Gallery … 978147671… AV     <NA>         17  77438\n 7 Captain… James… 1998-06-01 Pocket B… 978143910… CT     <NA>         21  95110\n 8 Captain… Macke… 1998-10-01 Pocket B… 978074345… CT     <NA>         26  76392\n 9 Captain… Chris… 1998-10-01 Pocket B… 978143910… CT     <NA>         34  78678\n10 The Cap… John … 2000-03-01 Pocket B… 978074340… CT     <NA>        176 436682\n# ℹ 773 more rows\n# ℹ 2 more variables: nchar <dbl>, dedication <chr>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(star_trek)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 783\nColumns: 11\n$ title      <chr> \"Star Trek: Star Trek Movie Tie-In\", \"Starfleet Academy: Th…\n$ author     <chr> \"Alan Dean Foster\", \"Rick Barba\", \"Rudy Josephs\", \"Rick Bar…\n$ date       <date> 2009-05-12, 2010-11-02, 2010-12-28, 2011-06-28, 2012-06-26…\n$ publisher  <chr> \"Simon and Schuster\", \"Simon Spotlight\", \"Simon Spotlight\",…\n$ identifier <chr> \"1439163391\", \"9781442414259\", \"9781442414242\", \"9781442414…\n$ series     <chr> \"AV\", \"AV\", \"AV\", \"AV\", \"AV\", \"AV\", \"CT\", \"CT\", \"CT\", \"CT\",…\n$ subseries  <chr> NA, \"Starfleet Academy\", \"Starfleet Academy\", \"Starfleet Ac…\n$ nchap      <dbl> 18, 14, 31, 13, 30, 17, 21, 26, 34, 176, 9, 12, 36, 23, 44,…\n$ nword      <dbl> 77035, 40129, 52547, 39495, 62030, 77438, 95110, 76392, 786…\n$ nchar      <dbl> 460097, 238567, 295829, 233095, 349595, 537472, 554915, 424…\n$ dedication <chr> \"For Bjo and John TrimbleBecause hospitality is forever and…\n```\n\n\n:::\n\n```{.r .cell-code}\nskim(star_trek)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |          |\n|:------------------------|:---------|\n|Name                     |star_trek |\n|Number of rows           |783       |\n|Number of columns        |11        |\n|_______________________  |          |\n|Column type frequency:   |          |\n|character                |7         |\n|Date                     |1         |\n|numeric                  |3         |\n|________________________ |          |\n|Group variables          |None      |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min|   max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|-----:|-----:|--------:|----------:|\n|title         |         0|          1.00|   4|    58|     0|      781|          0|\n|author        |         0|          1.00|   2|   138|     0|      277|          0|\n|publisher     |        11|          0.99|   7|    26|     0|       21|          0|\n|identifier    |         0|          1.00|  10|    41|     0|      783|          0|\n|series        |         0|          1.00|   2|     6|     0|       28|          0|\n|subseries     |       727|          0.07|   4|    23|     0|       15|          0|\n|dedication    |       411|          0.48|  98| 97953|     0|      372|          0|\n\n\n**Variable type: Date**\n\n|skim_variable | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:-------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|date          |         0|             1|1967-01-01 |2017-11-28 |2001-12-14 |      577|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|      mean|        sd|   p0|    p25|    p50|      p75|    p100|hist  |\n|:-------------|---------:|-------------:|---------:|---------:|----:|------:|------:|--------:|-------:|:-----|\n|nchap         |        23|          0.97|     24.59|     21.61|    1|     13|     21|     29.0|     373|▇▁▁▁▁ |\n|nword         |         0|          1.00|  76190.08|  52453.35|  782|  52500|  70730|  90994.5|  687175|▇▁▁▁▁ |\n|nchar         |         0|          1.00| 461822.36| 326062.45| 4337| 310520| 415964| 555866.5| 4484069|▇▁▁▁▁ |\n\n\n:::\n\n```{.r .cell-code}\ninspect(star_trek)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n        name     class levels   n missing\n1      title character    781 783       0\n2     author character    277 783       0\n3  publisher character     21 772      11\n4 identifier character    783 783       0\n5     series character     28 783       0\n6  subseries character     15  56     727\n7 dedication character    372 372     411\n                                   distribution\n1 Kobayashi Maru (0.3%), Warped (0.3%) ...     \n2 Peter David (4.9%) ...                       \n3 Pocket Books (67.4%) ...                     \n4  (%) ...                                     \n5 TOS (26.8%), TNG (18.6%), SCE (10.7%) ...    \n6 Typhon Pact (16.1%) ...                      \n7  (%) ...                                     \n\nDate variables:  \n  name class      first       last min_diff max_diff   n missing\n1 date  Date 1967-01-01 2017-11-28   0 days 485 days 783       0\n\nquantitative variables:  \n   name   class  min     Q1 median       Q3     max         mean           sd\n1 nchap numeric    1     13     21     29.0     373     24.58816     21.61247\n2 nword numeric  782  52500  70730  90994.5  687175  76190.07535  52453.34633\n3 nchar numeric 4337 310520 415964 555866.5 4484069 461822.36271 326062.44928\n    n missing\n1 760      23\n2 783       0\n3 783       0\n```\n\n\n:::\n:::\n\n\n\n# Plotted graphs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngf_bar(~ publisher, data = star_trek) %>%\n  gf_theme(theme(axis.text.x = element_text(angle = 45, hjust = 1)))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_bar(~ series, data = star_trek) %>%\n  gf_theme(theme(axis.text.x = element_text(angle = 45, hjust = 1)))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}